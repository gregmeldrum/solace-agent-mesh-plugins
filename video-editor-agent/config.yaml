# Plugin Metadata:
# Name: video-editor-agent
# Version: 0.1.0
# Description: A SAM plugin: video editor agent
# Author: Your Name <your.email@example.com>
# 
# --- Start of Agent Configuration Template ---
# Solace Agent Mesh: Plugin Configuration Template
#
# This file serves as a template for creating new agent configurations from this plugin.
# Use placeholders like __COMPONENT_KEBAB_CASE_NAME__, __COMPONENT_PASCAL_CASE_NAME__,
# and __COMPONENT_UPPER_SNAKE_CASE_NAME__ where the specific component name should be inserted.

log:
  stdout_log_level: INFO
  log_file_level: DEBUG
  log_file: __COMPONENT_KEBAB_CASE_NAME__.log

# To use the `shared_config.yaml` file, uncomment the following line and remove the `shared_config` section below.
# !include ../shared_config.yaml
shared_config:
  - broker_connection: &broker_connection
      dev_mode: ${SOLACE_DEV_MODE, false}
      broker_url: ${SOLACE_BROKER_URL, ws://localhost:8008}
      broker_username: ${SOLACE_BROKER_USERNAME, default}
      broker_password: ${SOLACE_BROKER_PASSWORD, default}
      broker_vpn: ${SOLACE_BROKER_VPN, default}
      temporary_queue: ${USE_TEMPORARY_QUEUES, true}

  - models:
    general: &general_model
      # This dictionary structure tells ADK to use the LiteLlm wrapper.
      # 'model' uses the specific model identifier your endpoint expects.
      model: ${LLM_SERVICE_GENERAL_MODEL_NAME} # Use env var for model name
      # 'api_base' tells LiteLLM where to send the request.
      api_base: ${LLM_SERVICE_ENDPOINT} # Use env var for endpoint URL
      # 'api_key' provides authentication.
      api_key: ${LLM_SERVICE_API_KEY} # Use env var for API key

  - services:
    # Default session service configuration
    session_service: &default_session_service
      type: "memory"
      default_behavior: "PERSISTENT"
    
    # Default artifact service configuration
    artifact_service: &default_artifact_service
      type: "filesystem"
      base_path: "/tmp/samv2"
      artifact_scope: namespace # Or "namespace", "app", "custom"

apps:
  - name: __COMPONENT_KEBAB_CASE_NAME__-app
    app_base_path: . 
    app_module: solace_agent_mesh.agent.sac.app 
    broker:
      <<: *broker_connection

    # App Level Config
    app_config:
      namespace: ${NAMESPACE} 
      supports_streaming: true 
      agent_name: "__COMPONENT_PASCAL_CASE_NAME__" 
      display_name: "__COMPONENT_SPACED_CAPITALIZED_NAME__ Agent"
      model: *general_model 

      instruction: |
        You are a Video Editor Agent that helps users edit videos using professional tools.

        Your capabilities include:

        **Phase 1 - Basic Operations:**
        1. **Format Conversion**: Convert videos between MP4, MKV, AVI, WebM, MOV, and FLV formats
        2. **Trimming**: Cut videos to specific time ranges (start and end in seconds)
        3. **Audio Extraction**: Extract audio from videos as MP3, WAV, AAC, FLAC, OGG, or M4A
        4. **Compression**: Reduce video file sizes by target size (MB) or quality preset (high/medium/low)

        **Phase 2 - Advanced Operations:**
        5. **Watermarking**: Add text or image watermarks to videos with customizable position and opacity
        6. **Resizing**: Change video resolution using presets (1080p, 720p, 480p, 360p) or custom dimensions
        7. **Merging**: Concatenate multiple videos into a single file
        8. **Subtitles**: Add subtitle tracks from SRT files with style options

        **How to use:**
        - Users must first upload their video, which becomes an artifact
        - Reference uploaded videos by their artifact filename
        - All outputs are saved as new artifacts
        - Provide clear feedback about processing status and results

        **Best practices:**
        - Ask users for the artifact name if not provided
        - Suggest quality settings when converting or compressing
        - Warn about processing time for large videos
        - Explain the trade-offs between file size and quality
        - Show before/after file sizes when compressing
        - For watermarks, suggest appropriate opacity levels (0.3-0.7)
        - For resizing, recommend maintaining aspect ratio
        - For merging, verify all videos have compatible formats
        - For subtitles, ensure SRT file is properly formatted

        Be helpful, professional, and explain video editing concepts when needed.

      tools:
        - group_name: artifact_management
          tool_type: builtin-group

        # Video Editor Tools
        - tool_type: python
          component_module: video_editor_agent.tools
          component_base_path: .
          function_name: convert_video_format
          tool_config:
            timeout_seconds: 600

        - tool_type: python
          component_module: video_editor_agent.tools
          component_base_path: .
          function_name: trim_video
          tool_config:
            timeout_seconds: 600

        - tool_type: python
          component_module: video_editor_agent.tools
          component_base_path: .
          function_name: extract_audio
          tool_config:
            timeout_seconds: 300

        - tool_type: python
          component_module: video_editor_agent.tools
          component_base_path: .
          function_name: compress_video
          tool_config:
            timeout_seconds: 900

        # Phase 2 Tools
        - tool_type: python
          component_module: video_editor_agent.tools
          component_base_path: .
          function_name: add_watermark
          tool_config:
            timeout_seconds: 600

        - tool_type: python
          component_module: video_editor_agent.tools
          component_base_path: .
          function_name: resize_video
          tool_config:
            timeout_seconds: 600

        - tool_type: python
          component_module: video_editor_agent.tools
          component_base_path: .
          function_name: merge_videos
          tool_config:
            timeout_seconds: 900

        - tool_type: python
          component_module: video_editor_agent.tools
          component_base_path: .
          function_name: add_subtitles
          tool_config:
            timeout_seconds: 600

      session_service: *default_session_service
      artifact_service: *default_artifact_service

      artifact_handling_mode: "reference"
      enable_embed_resolution: true
      enable_artifact_content_instruction: true

      agent_card:
        description: "Professional video editing agent with 8 tools for format conversion, trimming, audio extraction, compression, watermarking, resizing, merging, and subtitles"
        defaultInputModes: ["text"]
        defaultOutputModes: ["text", "video", "audio"]
        skills:
          - id: "convert_video_format"
            name: "Convert Video Format"
            description: "Convert videos between MP4, MKV, AVI, WebM, MOV, and FLV formats with quality control"
          - id: "trim_video"
            name: "Trim Video"
            description: "Cut videos to specific time ranges with fast, lossless processing"
          - id: "extract_audio"
            name: "Extract Audio"
            description: "Extract audio tracks from videos in multiple formats (MP3, WAV, AAC, etc.)"
          - id: "compress_video"
            name: "Compress Video"
            description: "Reduce video file sizes by target size or quality preset with detailed statistics"
          - id: "add_watermark"
            name: "Add Watermark"
            description: "Add text or image watermarks to videos with customizable position and opacity"
          - id: "resize_video"
            name: "Resize Video"
            description: "Change video resolution using presets (1080p, 720p, 480p, 360p) or custom dimensions"
          - id: "merge_videos"
            name: "Merge Videos"
            description: "Concatenate multiple video files into a single video"
          - id: "add_subtitles"
            name: "Add Subtitles"
            description: "Add subtitle tracks from SRT files with customizable styling"

      agent_card_publishing: { interval_seconds: 10 }
      agent_discovery: { enabled: false }
      inter_agent_communication:
        allow_list: []
        request_timeout_seconds: 30